function d(c){try{return new URL(c).hostname.replace(/^www\./,"")}catch{return""}}const s={"youtube.com":6,"tiktok.com":7,"instagram.com":6,"facebook.com":6,"reddit.com":5,"twitter.com":4,"netflix.com":5,"linkedin.com":2,"notion.so":1,"stackoverflow.com":1,"github.com":1,"chat.openai.com":2,"pinterest.com":3,"quora.com":3,"discord.com":4,"twitch.tv":5,"amazon.com":2,"medium.com":2,"wikipedia.org":1,"slack.com":2,"gmail.com":2,"yahoo.com":1,"bing.com":1,"apple.com":2,"zoom.us":2,"dropbox.com":2,"drive.google.com":2,"paypal.com":2,"ebay.com":2,"coursera.org":1,"udemy.com":1,"bbc.com":1,"nytimes.com":1,"espn.com":2,"cnn.com":1,"weather.com":1,"booking.com":2,"airbnb.com":2,"spotify.com":3,"soundcloud.com":3,"canva.com":2,"trello.com":2,"asana.com":2,"dribbble.com":2,"behance.net":2,"figma.com":2,"adobe.com":2,"messenger.com":3,"telegram.org":3,"whatsapp.com":3,"vimeo.com":2,"imdb.com":1,"courier.com":1,"flipkart.com":2,"shopify.com":2,"etsy.com":2,"wordpress.com":1,"tumblr.com":2,"weibo.com":3,"snapchat.com":3,"duolingo.com":1,"roblox.com":7,"epicgames.com":6,"steamcommunity.com":6,"addictinggames.com":7,"kongregate.com":6,"miniclip.com":6,"9gag.com":6,"boredpanda.com":5,"buzzfeed.com":5,"pornhub.com":7,"xvideos.com":7,"xnxx.com":7,"redtube.com":7,"youporn.com":7,"brazzers.com":7,"onlyfans.com":7,"chaturbate.com":7,"cam4.com":7,"livejasmin.com":7,"wechat.com":5,"line.me":5,"vk.com":5,"ok.ru":4,"t.me":4,"clubhouse.com":4,"be.real.com":4,"threads.net":4,"mastodon.social":3,"truthsocial.com":3,"gab.com":3,"parler.com":3,"flickr.com":2,"mix.com":2,"mewe.com":2};function u(c){const o=d(c.domain),a=o in s?s[o]:3,m=c.duration/60,t=c.scrolls/m,r=c.clicks/m;let e=a;return t>10&&(e+=2),t>100&&(e+=5),r>5&&(e+=1),m>=15&&(e+=.5),m>=30&&(e+=1.5),console.log(e),e>=6?"high":e>=4?"medium":"low"}let n=null;chrome.tabs.onActivated.addListener(async c=>{try{const o=await chrome.tabs.get(c.tabId);o&&o.url&&(console.log("Active tab URL:",o.url),n=o.url)}catch(o){console.error("Error getting active tab:",o)}});chrome.tabs.onUpdated.addListener((c,o,a)=>{a.active&&o.url&&(console.log("Active tab updated URL:",o.url),n=o.url)});chrome.runtime.onMessage.addListener((c,o,a)=>{if(c.type==="ACTIVITY_DATA"&&c.activity){const m=c.activity,t=u(m);let r=2;t==="medium"&&(r=5),t==="high"&&(r=8);const e={score:r,timestamp:m.timestamp};chrome.storage.local.set({lastScore:e}),chrome.storage.local.get(["scoreHistory"],l=>{const i=l.scoreHistory||[];i.push(e),i.length>100&&i.shift(),chrome.storage.local.set({scoreHistory:i})}),chrome.runtime.sendMessage({type:"LIVE_SCORE_UPDATE",entry:e})}});
